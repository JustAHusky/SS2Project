CREATE DATABASE IF NOT EXISTS WritingAssistant;

USE WritingAssistant;

CREATE TABLE User (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    google_id VARCHAR(255) NOT NULL UNIQUE,
    username VARCHAR(255),
    email VARCHAR(255) NOT NULL UNIQUE,
    name VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Text (
    text_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    text_content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES User(user_id)
);

CREATE TABLE TextResult (
    result_id INT AUTO_INCREMENT PRIMARY KEY,
    text_id INT NOT NULL,
    grammar_check_result TEXT,
    plagiarism_check_result TEXT,
    text_completion_result TEXT,
    paraphrasing_result TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (text_id) REFERENCES Text(text_id)
);
